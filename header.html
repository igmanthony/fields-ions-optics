document.write(`
<meta charset="UTF-8">
<meta name="viewport", content="width=device-width, initial-scale=1">
<meta name="author", content="Ian Anthony">
<meta name="keywords", content="ion,simulation,mass,spectrometry,fields,ions,optics">
<title>Fields, Ions, and Optics</title>
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest"> 
<link rel="preconnect" href="https://fonts.gstatic.com">
<link
    href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,500;1,500&family=Inconsolata&family=Montserrat:wght@300;400;500;600&display=swap"
    rel="stylesheet">
<link rel="preload" href="style.css" as="style">
<link rel="stylesheet" href="style.css">
<!--
    The "playground" and "header" files are Javascript files that write HTML into all documents.
    Forgive me for this abomination of a hack. I can't include HTML but I don't want
    to copy-paste the full playground in to each file. I considered loading all HTML and
    serving it via a single script, rather than the other way around. I think this is less sinful.
-->
<div class="topnav no-print" id="topnav" style="width:100%">
    <div class='flex-child no-print' style="width:100%">
        <div class='title no-print' style="width:100%">SIMULATING FIELDS, IONS, and OPTICS</div>
        <div class='subtitle no-print' style="width:100%">A COMPACT PRIMER ON ION SIMULATION</div>
        <div class="header  no-print">
            <div style="width:100%">
                <div class='sub-header no-print' style="width:100%">Ions & Simulations</div>
                <div class="linky" style="width:100%">
                    <div class=spacer><a href="index.html">Forward</a></div>
                    <div class=spacer><a href="simulation_playground.html">The Playground</a></div>
                    <div class=spacer><a href="simulations.html">Simulations</a></div>
                    <div class=spacer><a href="electric_fields.html">Electric fields</a></div>
                    <div class=spacer><a href="charged_particles.html">Charged particles</a></div>
                    <div class=spacer><a href="visualization.html">Visualization</a></div>
                </div>
            </div>
            <div style="width:100%">
                <div class='sub-header no-print' style="width:100%">Implementation</br> </div>
                <div class="linky" style="width:100%">
                    <div class=spacer><a href="laplace_equation.html">Laplace’s equation</a></div>
                    <div class=spacer><a href="fast_electrodes.html">Fast electrodes</a></div>
                    <div class=spacer><a href="magnetic_fields.html">Magnetic fields</a></div>
                    <div class=spacer><a href="runge_kutta.html">Ion flight</a></div>
                    <div class=spacer><a href="bonus_detail.html">Bonus detail</a></div>
                </div>
            </div>
            <div style="width:100%">
                <div class='sub-header no-print' style="width:100%">Simulation examples</br></div>
                <div class="linky" style="width:100%">
                    <div class=spacer><a href="ion_lenses.html">Ion lenses</a></div>
                    <div class=spacer><a href="time_of_flight.html">Time-of-flight</a></div>
                    <div class=spacer><a href="sector_analyzers.html">Sector analyzers</a></div>
                    <div class=spacer><a href="quadrupoles.html">Quadrupoles</a></div>
                    <div class=spacer><a href="mass_filters.html">Mass filters</a></div>
                </div>
            </div>
            <div style="width:100%">
                <div class='sub-header no-print' style="width:100%">Fun with simulations</br></div>
                <div class="linky" style="width:100%">
                    <div class=spacer><a href="mass_spectrometers.html">Mass analyzers</a></div>
                    <div class=spacer><a href="data_processing.html">Data processing</a></div>

                </div>
            </div>
            <div style="width:100%">
                <div class='sub-header no-print' style="width:100%">Advanced topics</br></div>
                <div class="linky" style="width:100%">
                    <div class=spacer><a href="ion_mobility.html">Ion moblity</a></div>
                    <div class=spacer><a href="other_behavior.html">Other behavior</a></div>
                    <!-- Ion-neutral, rrkm, metastable decay, ergodic -->
                    <div class=spacer><a href="3d_simulations.html">3D Simulations</a></div>
                    <!-- Webassembly, the python script, lua -->
                    <div class=spacer><a href="code.html">Legal & code</a></div> <!-- Webassembly, the python script, lua -->
                    <div class=spacer><a href="simion_tips.html">SIMION Tips</a></div>
                    <div class=spacer><a href="conclusion.html">Conclusion</a></div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- PLAYGROUND -->
<div id="playgrounddiv" class="playgrounddiv  no-print">
    <button type="button" class="collapsible  no-print" id="playground">Simulation Playground</button>
    <div class="tab">
        <!-- BAR -->
        <div class="flex-container">
            <div style="vertical-align:middle">
                <input padding=4 type="range" min="-20000" max="20000" value="0" class="slider" id="voltage_slider"
                    step="1" style="width: 120px">
                <div style="width:100%;text-align: center">
                    <input type="number" id="voltage_input" value=500 size="4" min="-20000" max="20000">
                    <output id="voltage_text">Volts</output>
                </div>
            </div>
            <button id="clear">Clear</button>
            <button id="einzel_lens">Einzel</br>lens</button>
            <button id="ion_funnel">Ion</br>funnel</button>
            <button id="quadrupole">Quadrupole </button>
            <button id="tof">Time-of-Flight</button>
            <button id="sector">Sector</button>
        </div>
        <!-- ELECTRODES AND CANVASES -->
        <div class="flex-container">
            <div class="flex-child">
                <div><button class="sidebutton" id="electrode1">Red</br>Electrode</button></div>
                <div><button class="sidebutton" id="electrode2">Green</br>Electrode</button></div>
                <div><button class="sidebutton" id="electrode3">Blue</br>Electrode</button></div>
                <div><button class="sidebutton" id="electrode4">Brown</br>Electrode</button></div>
                <div>
                    <button id="electrode0" class="sidebutton"
                        style="padding-top:9px;padding-bottom:9px;">Erase</button>
                </div>
                <div><button id="brush1" class="sidebutton">1 x 1</br>Brush</button></div>
                <div><button id="brush2" class="sidebutton">2 x 2</br>Brush</button></div>
                <div><button id="brush3" class="sidebutton">3 x 3</br>Brush</button></div>
                <div><button class="specialbutton" id="update">Refine</br>Electrical</br>Fields</button></div>
            </div>
            <div>
                <canvas id="electrode_map" width="600" height="600"></canvas>
                <canvas id="electric_field_map" width="600" height="600"></canvas>
            </div>
        </div>
        <!-- ADVANCED -->
        <button type="button" class="collapsible" id="advanced">Advanced</button>
        <div class="tab">
            <div style="align-items:center;" class="flex-container">
                <div>
                    <button id="SIMION_SAVE" class="advancebutton">Save to</br>SIMION</button>
                    <button id="field_lines" class="advancebutton">Draw</br>field</button>
                    <button id="apply_high" class="advancebutton">Apply</br>High</button>
                    <button id="apply_low" class="advancebutton">Apply</br>Low</button>
                    <button id="apply_sine" class="advancebutton" style="margin-right:8px">Apply</br>Sine</button>
                </div>
                <div>
                    <input type="checkbox" id="splattable" name="splattable" style="margin-left:-25px;margin-right:2px;padding:0;" checked>
                    <output for="splattable" style="margin-left:-20px;margin-right:8px;padding:0;">Splattable</label>
                </div>
                <div>
                    <div>
                        <input type="number" id="sin_frequency" value=1600 size="4" min="0" max="10000">
                        <output style="margin-right:15px">sine f (khz)</output>
                    </div>
                    <div>
                        <input type="number" id="offset" value=0 size="4" min="-10000" max="10000">
                        <output style="margin-right:15px">offset (V)</output>
                    </div>
                </div>

                <div>
                    <div>
                        <input type="number" id="ion_mass" value=100 size="2" min="0.01" max="100000.0">
                        <output style="margin-right:15px">Mass (Da)</output>
                    </div>
                    <div>
                        <input type="number" id="ion_charge" value=1 size="4" min="-10" max="10">
                        <output style="margin-right:15px">Charge (e)</output>
                    </div>
                </div>

                <div>
                    <div>
                        <input type="number" id="ion_x_velocity" value=0 size="4" min="-10000" , max="10000">
                        <output style="margin-right:15px">x vel m/ms</output>
                    </div>
                    <div>
                        <input type="number" id="ion_y_velocity" value=0 size="4" min="-10000" max="10000">
                        <output style="margin-right:15px">y vel m/ms</output>
                    </div>
                </div>

                <div>
                    <div>
                        <input type="number" id="number" value=1 size="4" min="1" max="50">
                        <output style="margin-right:15px">Count</output>
                    </div>
                    <div>
                        <input type="number" id="randomness" value=0 size="4" min="0" max="100">
                        <output style="margin-right:15px">Random (%)</output>
                    </div>
                </div>
                <div id="status" class="status">0 μs</div>
            </div>
            <div class="flex-container" style="padding-bottom:0px;margin-bottom:0px">
                <div><canvas id="time_line" width="900" height="120"></canvas></div>
                <div>
                    <pre style="margin-bottom:-20px"><code id="splatlog"></code></pre>
                </div>
            </div>
        </div>
    </div>
</div>

`);