<!DOCTYPE html>
<html lang="en">
<head>
  <title>Magnetism</title>
  <script src="header.html"></script>
</head>

<body>
    <div class="actual_body">
      <h1>Magnets — how do they work? </h1>
      <h2>Water, fire, air, and <a href="https://youtu.be/8GyVx28R9-s?t=110">dirt</a></h2>
      <div class="flex-child" style="text-align:center;width: 100%;"><div><img src="images/cyclotron_motion.webp" alt="Magnetic fields cause electrons to spiral" width="800" style="outline-style: solid;outline-width:1px"></img></div></div>
      Helmholtz coils producing cyclotron motion <a href="https://commons.wikimedia.org/wiki/File:Cyclotron_motion.jpg">photo by Marcin Białek</a>
      <p>
        Most magnetic fields used in scientific instruments are generated with either permanent magnets or an arrangement of <a href="https://en.wikipedia.org/wiki/Helmholtz_coil">Helmholtz coils</a>. Helmholtz coils are made from two identically-sized loops of wire wound in the same direction. The loops are separated by a distance of exactly each loop’s radius. When electricity is passed through the loops, a mostly homogenous magnetic field is generated between the two loops. The image above shows the effects that a beam of electrons experiences inside the magnetic field generated by a Helmholtz coil. The electrons are accelerated using high voltage and are made visible by their impinging some residual gas, causing it to fluoresce. As can be seen, the electrons arc in a circle.
      </p>
      <p>
        Unlike electric fields, magnetic fields do not have a particularly intuitive way of explaining how they work in relation to ions. In short, they work by causing a charged particle’s trajectory to curve, known as the <a href="https://en.wikipedia.org/wiki/Lorentz_force">Lorentz force</a>. The Lorentz force is calculated by the following equation — sometimes known as the Lorentz law:
      </p>
      <p style="margin-left:25px;">
        <i>F</i> = <i>q</i><i>E</i> + <i>q</i><i>v</i> × <i>B</i></br>
      </p>
      <p>
        where <i>F</i> is the force on a particle as a function of its charge, <i>q</i>, the electric field, <i>E</i>, the magnetic field, <i>B</i>, and its velocity, <i>v</i>. The “×” in this case means to take the cross product of the magnetic field vector and the velocity vector. Two differences are apparent from the equation. First, the effect of the magnetic field on the charged particle is a function of the particles’s velocity — the slower it moves the less force it feels. If it stops moving, it feels no magnetic force at all. Second, the cross product of the magnetic and velocity vectors means that the force is applied perpendicularly to those two vectors. The second one is, to my less-than-mathematically-inclined brain, difficult to intuitvely grasp. Some version of following diagram is often provided, and it helps explain the picture above of the circle of electrons:
      </p>
      <div class="flex-child" style="text-align:center;width: 100%;">
        <div>
          <img src="images/lorentz_force.webp" alt="Diagram of Lorentz force on building" width="600"
          style="outline-style: solid;outline-width:1px"></img>
        </div>
      </div>
      “Lorentz force — a charged particle deflects in a magnetic field” <a href="https://commons.wikimedia.org/w/index.php?curid=60357133">photo by Vysotsky</a>
      <p>
        In the photo of the diagram above, the magnetic field is depicted as travelling “into” the wall. This is shown by the cross-in-circle symbol ⊗. If the magnetic field were travelling “out” from the wall, the symbol would be a circle with a dot in its center ⊙. A mnemonic for remembering the two symbols is to think of an arrow flying toward or away from you, with the feathers of the arrow seen in a cross as it flys away and the point seen as it comes towards.
      </p>
      <p>
        Implementing a rigorous simulation of magnetic fields is extremely difficult, as charged particles themselves will generate magnetic fields as they travel. SIMION has a <a href="https://simion.com/info/magnets.html"> limited ability to simulate magnetic fields</a>. The Simulation Playground is even more limited and only allows magnetic fields travelling exactly “into” or “out from” the viewing plane — the direction is indicated by a repeated pattern of the cross or dot symbols and requires “painting ”an electrode that is then turned into a magnet using a side button. 
      </p>
      <p>
        With such a simple magnetic field of homogenous strength and known orientation, it is rather easy to add it to the kinematics equations <a href="dimensions.html">we have been building up</a>:
      </p>
      <div style="margin-bottom:20px;border-width:1px;border-style:solid;padding-left:10px;padding-top:5px;padding-bottom:5px;background-color: #282a36;font-size:15px;">
        <code style="color:#f8f8f2;">
          dt = <mark class=l>1E-9</mark> <mark class='c'># Conversion from seconds to nanoseconds</mark></br> 
          position_log <mark class='p'>=</mark> []</br>
          position <mark class='p'>=</mark> [initial_x_position, initial_y_position]</br>
          <mark class='p'>for</mark> time in <mark class='y'>range</mark>(<mark class='l'>1</mark>, <mark class='l'>400_001</mark>): <mark class='c'># Keep going for 400,000 steps</mark></br>
          &nbsp;&nbsp;&nbsp;&nbsp;electric_vector <mark class='p'>=</mark> <mark class='g'>get_electric_vector</mark>(electric_field_map, position)</br>
          &nbsp;&nbsp;&nbsp;&nbsp;<mark class='c'># ======= Added code =======</mark></br>
          &nbsp;&nbsp;&nbsp;&nbsp;magnetic_vector <mark class='p'>=</mark> <mark class='g'>get_magnetic_vector</mark>(electric_field_map, position, velocity)</br>
          &nbsp;&nbsp;&nbsp;&nbsp;force <mark class='p'>=</mark> charge <mark class='p'>*</mark> (electric_vector + magnetic_vector)</br>
          &nbsp;&nbsp;&nbsp;&nbsp;<mark class='c'># ====== /Added code =======</mark></br>
          &nbsp;&nbsp;&nbsp;&nbsp;acceleration <mark class='p'>=</mark> force <mark class='p'>/</mark> mass <mark class='c'># Roll the golfball down the hill</mark></br>
          &nbsp;&nbsp;&nbsp;&nbsp;velocity <mark class='p'>+=</mark> acceleration <mark class='p'>*</mark> dt </br>
          &nbsp;&nbsp;&nbsp;&nbsp;position <mark class='p'>+=</mark> velocity <mark class='p'>*</mark> dt</br>
          &nbsp;&nbsp;&nbsp;&nbsp;position_log.<mark class='g'>append</mark>([position, time]) <mark class='c'># Log position at each time</mark></br>
          &nbsp;&nbsp;&nbsp;&nbsp;<mark class='p'>if</mark> <mark class='g'>ion_has_splatted</mark>(position, electrode_map, boundaries):</br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<mark class='y'>print</mark>(<mark class='w'>'SPLAT!'</mark>)</br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<mark class='p'>break</mark> <mark class='c'># We've hit something, stop the simulation</mark>
        </code>
      </div>
      <p>
        It is really just adding a line of code that calls the “get_magnetic_vector” function — which in turn uses the position to find the magnetic field at a location and then calculates the cross product of the velocity and magnetic field vectors. We then simply add the two vectors and multiply (scale them) both by the charge.
      </p>
      <p>
        Let’s try out a <button class="loadbutton" id="magnet_test_map">Magnet example</button>
      </p>
      <h1>
        In progress & unfinished
      </h1>

      —−’

    </div>
    </br>
    <script src="index.js"></script>
</body>

</html>